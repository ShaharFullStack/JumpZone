<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Jump Zone | קפיצה אחת משנה את הכל</title>
    
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts (Heebo) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@400;700;900&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="styles.css">
</head>
<body>
    
    <!-- 3D Background Canvas -->
    <canvas id="bg-canvas"></canvas>

    <!-- Sections Container for the "jump" scroll -->
    <div id="sections-container">
        <!-- Hero Section -->
        <section class="section relative text-center text-white p-4 bg-black/50">
            <video autoplay loop muted playsinline class="absolute inset-0 w-full h-full object-cover z-[-1]" poster="./assets/poster1.jpg">
                <source src="./assets/Hero.mp4" type="video/mp4" />
            </video>
            <div class="z-10 flex flex-col items-center">
                <div class="relative w-32 h-32 md:w-40 md:h-40 lg:w-48 lg:h-48 mb-6 drop-shadow-2xl hero-logo"></div>
                <h1 class="text-5xl md:text-7xl lg:text-8xl font-black leading-tight mb-4" style="text-shadow: 2px 2px 8px rgba(0,0,0,0.7)">
                    קפיצה אחת יכולה לשנות את כל הסיפור שלך
                </h1>
                <p class="text-xl md:text-2xl max-w-3xl mb-8" style="text-shadow: 1px 1px 4px rgba(0,0,0,0.7)">
                    משפר את הכושר, מעצים את הנפש ומתחבר לעצמך
                </p>
                <a href="https://wa.me/972508447575?text=אני%20רוצה%20לקבוע%20שיעור%20ניסיון!" target="_blank" class="px-8 py-4 bg-indigo-600 text-white font-bold text-lg rounded-lg shadow-lg hover:bg-indigo-700 transition-all duration-300 transform hover:scale-105">
                    אני רוצה לקבוע שיעור ניסיון!
                </a>
            </div>
        </section>

        <!-- Story Section -->
        <section id="story" class="section p-8 md:p-12 bg-black/80 text-white">
            <div class="grid md:grid-cols-2 gap-12 max-w-6xl items-center">
                <div class="order-2 md:order-2">
                    <!-- <img src="./assets/IMG_7165.JPG" alt="נתנאל קופץ בחבל" class="rounded-2xl shadow-2xl w-full h-auto object-cover max-h-[70vh]"> -->
                </div>
                <div class="order-2 md:order-2 p-10 bg-white/80 rounded-2xl shadow-lg">
                    <h2 class="text-4xl md:text-5xl p-10 font-bold mb-6 text-indigo-900">קפיצה שהצילה חיים. הסיפור שלי.</h2>
                    <p class="mb-4 text-xl text-black font-semibold leading-relaxed">אני המאמן היחיד בארץ (ואולי בעולם) שבנה את חייו מחדש עם עין אחת, חבל קפיצה אחד ולב ענק. ב2018 חיי נעצרו. אובחנתי עם גלאוקומה קשה, שהובילה לכאבים בלתי נסבלים, לילות בלי שינה, ודיכאון עמוק. איבדתי את הראייה בעין שמאל אבל מה שכאב יותר היה לאבד את הזהות שלי, את האנרגיה, את הביטחון, את עצמי.</p>
                    <p class="text-lg text-black font-semibold leading-relaxed">הייתי במקום חשוך. מנותק מהעולם. עם חרדה חברתית, פחדים, ואפס תקווה. אבל דווקא שם ברגע הכי נמוך גיליתי משהו פשוט: חבל קפיצה. הוא לא היה רק כלי לאימון. הוא היה קצב. עוגן. דרך לנשום מחדש. דרכו בניתי את עצמי מהיסוד – גוף, נפש, ולב.</p>
                </div>
            </div>
        </section>

        <!-- Philosophy Section -->
        <section id="philosophy" class="section p-8 md:p-12 text-white">
            <div class="max-w-6xl text-center mb-12">
                <!-- <img src="./assets/IMG_3125.JPG" alt="פילוסופיית הקפיצה" class="rounded-2xl shadow-2xl w-full h-auto object-cover max-h-[70vh]"> -->
           </div>
            <div class="grid md:grid-cols-2 gap-12 max-w-6xl">
                <div id="philosophy-content" class="order-2 md:order-2 p-10 bg-white/80 rounded-2xl shadow-lg">
                    <h2 class="text-4xl md:text-5xl font-bold mb-6 text-orange-400">פילוסופיית הקפיצה: החיים דרך חבל אחד</h2>
                    <p class="mb-4 text-lg leading-relaxed">קפיצה בחבל היא השתקפות של החיים עצמם. כל קפיצה היא בחירה: לבחור לנוע גם כשכואב. לטעות, להסתבך, ואז לחזור לקצב. להתאזן, לנשום, לקפוץ שוב גם אחרי נפילה.</p>
                    <p class="text-lg leading-relaxed">החבל הזה לימד אותי שאם אני יכול לשלוט בתנועה אני יכול לשלוט בסיפור שלי. שאם אני מצליח לסנכרן בין נשימה, קצב ותודעה אני יכול לנצח גם את הפחדים הכי עמוקים שלי. זו לא רק שיטה לשיפור כושר זו דרך להתחבר לעצמך. דרך לפרוץ גבולות פנימיים, לשחרר מתחים, לבנות חוסן מנטלי ולהיזכר בכוח שיש בך.</p>
                </div>
            </div>
        </section>

        <!-- Why Us Section -->
        <section id="why-us" class="section relative text-right text-white p-4">
            <div class="absolute inset-0 opacity-60 z-0"></div>
            <video autoplay loop muted playsinline class="absolute inset-0 w-full h-full object-cover z-[-1]">
                <source src="assets/boxing.mp4" type="video/mp4" />
            </video>
            <div id="why-us-content" class="z-10 flex flex-col items-center max-w-4xl mx-auto">
                <h2 class="text-4xl md:text-5xl font-bold mb-8 text-indigo-400" style="text-shadow: 2px 2px 8px rgba(0,0,0,0.7)"> מה זה Jump Zone?</h2>
                <ul class="grid md:grid-cols-1 gap-y-4 text-lg mb-8 text-right">
                    <li class="relative pr-6 py-2 text-right before:content-['●'] before:absolute before:right-0 before:text-green-400 before:text-xl before:leading-none">אימונים קבוצתיים ואישיים בגישה בגובה העיניים</li>
                    <li class="relative pr-6 py-2 text-right before:content-['●'] before:absolute before:right-0 before:text-green-400 before:text-xl before:leading-none">חיבור בין תנועה, מוזיקה ונפש</li>
                    <li class="relative pr-6 py-2 text-right before:content-['●'] before:absolute before:right-0 before:text-green-400 before:text-xl before:leading-none">קהילה בטוחה ומכילה</li>
                    <li class="relative pr-6 py-2 text-right before:content-['●'] before:absolute before:right-0 before:text-green-400 before:text-xl before:leading-none">סדנאות השראה, העצמה וחוסן מנטלי</li>
                    <li class="relative pr-6 py-2 text-right before:content-['●'] before:absolute before:right-0 before:text-green-400 before:text-xl before:leading-none">מקום אמיתי לצמיחה פיזית ורגשית</li>
                    <li class="relative pr-6 py-2 text-right before:content-['●'] before:absolute before:right-0 before:text-green-400 before:text-xl before:leading-none">אימונים מותאמים לכל גיל ורמה</li>
                </ul>
                <a href="https://wa.me/972508447575?text=אני%20רוצה%20לשמוע%20עוד%20פרטים" target="_blank" class="px-8 py-4 bg-indigo-600 text-white font-bold text-lg rounded-xl shadow-lg hover:bg-indigo-700 transition-all duration-300 transform hover:scale-105">
                    אני רוצה לשמוע עוד פרטים
                </a>
            </div>
        </section>

        <!-- Services Section -->
        <section id="services" class="section p-8 md:p-12 text-white">
            <div class="absolute inset-0 opacity-60 z-0"></div>
            <video autoplay loop muted playsinline class="absolute inset-0 w-full h-full object-cover z-[-1]">
                <source src="assets/services.mp4" type="video/mp4" />
            </video>
            <div class="max-w-6xl text-center">
                <h2 class="text-4xl md:text-5xl font-bold mb-12 text-pink-400">השירותים שלנו</h2>
                <div class="grid md:grid-cols-3 gap-8">
                    <div class="bg-gray-900 p-8 rounded-2xl shadow-lg flex flex-col items-center"><div class="text-5xl mb-4"></div><h3 class="text-2xl font-bold mb-4">אימונים</h3><ul class="text-gray-300 space-y-2"><li>אימוני קפיצה אישיים וקבוצתיים</li><li>אימוני אונליין מהבית</li></ul></div>
                    <div class="bg-gray-900 p-8 rounded-2xl shadow-lg flex flex-col items-center"><div class="text-5xl mb-4"></div><h3 class="text-2xl font-bold mb-4">העצמה אישית</h3><ul class="text-gray-300 space-y-2"><li>סדנאות חוסן מנטלי, שחרור מתחים וביטוי עצמי</li><li>ליווי למי שעובר שיקום, קושי נפשי או גופני</li><li>בניית ביטחון עצמי וקואורדינציה צעד אחר צעד</li></ul></div>
                    <div class="bg-gray-900 p-8 rounded-2xl shadow-lg flex flex-col items-center"><div class="text-5xl mb-4"></div><h3 class="text-2xl font-bold mb-4">קהילה</h3><ul class="text-gray-300 space-y-2"><li>מפגשים, אירועים ופעילויות חברתיות</li><li>מקום בטוח לשאול, לטעות, לצמוח</li></ul></div>
                </div>
            </div>
        </section>

        <!-- Testimonials Section -->
        <section id="testimonials" class="section p-8 md:p-12 bg-gray-900 text-white">
            <div class="max-w-5xl text-center">
                <h2 class="text-4xl md:text-5xl font-bold mb-12 text-indigo-400">לקוחות מספרים</h2>
                <div class="grid md:grid-cols-3 gap-8">
                    <div class="bg-gray-800 p-6 rounded-xl shadow-lg"><p class="text-lg italic mb-4">"לא האמנתי כמה קפיצה בחבל יכולה לשנות לי את הגוף והלב. מקום מרגש באמת."</p><p class="font-bold text-indigo-300">יוסי, תל אביב</p></div>
                    <div class="bg-gray-800 p-6 rounded-xl shadow-lg"><p class="text-lg italic mb-4">"לא רק חיטוב או סיבולת זה מקום שמרגיש כמו בית לנפש. תודה!"</p><p class="font-bold text-indigo-300">נועה, ראשון לציון</p></div>
                    <div class="bg-gray-800 p-6 rounded-xl shadow-lg"><p class="text-lg italic mb-4">"התחלתי בלי כושר ועם הרבה פחד והיום אני קופץ עם ביטחון שלא חשבתי שאמצא אי פעם."</p><p class="font-bold text-indigo-300">עידו, חיפה</p></div>
                </div>
            </div>
        </section>

        <!-- Pricing Section -->
        <section id="pricing" class="section p-8 md:p-12 bg-gray-800 text-white">
            <div class="max-w-4xl w-full">
                <h2 class="text-4xl md:text-5xl font-bold mb-8 text-center text-pink-400">מחירון Jump Zone</h2>
                <div class="overflow-x-auto">
                    <table class="w-full text-center bg-gray-900 rounded-lg shadow-lg">
                        <thead class="bg-gray-700"><tr><th class="p-4 font-bold">סוג אימון</th><th class="p-4 font-bold">משך</th><th class="p-4 font-bold">מחיר לאימון בודד</th></tr></thead>
                        <tbody>
                            <tr class="border-b border-gray-700"><td class="p-4">אימון אישי</td><td class="p-4">45-60 דק'</td><td class="p-4">150-250 ₪</td></tr>
                            <tr class="border-b border-gray-700"><td class="p-4">אימון קבוצתי (נוער)</td><td class="p-4">60-90 דק'</td><td class="p-4">65 ₪</td></tr>
                            <tr class="border-b border-gray-700"><td class="p-4">אימון קבוצתי (מבוגרים)</td><td class="p-4">60-90 דק'</td><td class="p-4">58 ₪</td></tr>
                            <tr><td class="p-4">שיעור אונליין/זום</td><td class="p-4">60 דק'</td><td class="p-4">100-150 ₪</td></tr>
                        </tbody>
                    </table>
                </div>
                <p class="text-center mt-6 text-gray-400">* כל המחירים לאימון בודד. ניתן לרכוש חבילות מוזלות – לפרטים צרו קשר.<br>* כל האימונים כוללים ליווי אישי, תוכנית מותאמת וקהילה תומכת.</p>
            </div>
        </section>

        <!-- Final CTA Section -->
        <section id="final-cta" class="section relative text-center text-white p-4">
            <div class="absolute inset-0 bg-black opacity-50 z-0"></div>
            <video autoplay loop muted playsinline class="absolute inset-0 w-full h-full object-cover z-[-1]">
                <source src="./assets/services.mp4" type="video/mp4" />
            </video>
            <div class="z-10 flex flex-col items-center">
                <h2 class="text-5xl md:text-7xl font-black mb-6">מוכן לעשות את הקפיצה?</h2>
                <p class="text-xl md:text-2xl max-w-2xl mb-8">אם אתה מחפש לא רק אימון אלא דרך חדשה לחיות, לנשום ולנצח את עצמך – Jump Zone זה המקום בשבילך.</p>
                <a href="https://wa.me/972508447575?text=אני%20מוכן%20לקפוץ!%20קובעים%20שיעור%20ניסיון?" target="_blank" class="px-8 py-4 bg-pink-500 text-white font-bold text-lg rounded-lg shadow-lg hover:bg-pink-600 transition-all duration-300 transform hover:scale-105">
                    אני מוכן לקפוץ! קובעים שיעור ניסיון?
                </a>
            </div>
        </section>
    </div>

    <!-- Navigation Dots -->
    <div id="nav-dots"></div>
    
    <!-- Three.js CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <!-- GLTFLoader for loading 3D models -->
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/GLTFLoader.js"></script>

    <!-- Main Application Logic -->
    <script type="module">
        // --- Simple Three.js Background Setup ---
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 0.1, 2000);
        const renderer = new THREE.WebGLRenderer({ canvas: document.getElementById('bg-canvas'), alpha: true, antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setClearColor(0x000000, 0);

        camera.position.z = 2;

        // Enhanced lighting for the mascot
        const ambientLight = new THREE.AmbientLight(0x404040, 7);
        scene.add(ambientLight);
        const directionalLight = new THREE.DirectionalLight(0xffffff, 1);
        directionalLight.position.set(0, 0.5, 0);
        scene.add(directionalLight);
        
        // Spotlight focused on the mascot
        const spotlight = new THREE.SpotLight(0xffffff, 2);
        spotlight.position.set(2, 4, 2);
        spotlight.target.position.set(0, 1, 0);
        spotlight.angle = Math.PI / 6; // 30 degree cone
        spotlight.penumbra = 0.3; // Soft edges
        spotlight.decay = 2;
        spotlight.distance = 10;
        scene.add(spotlight);
        scene.add(spotlight.target);

        // Variables for mascot
        let mascot = null;
        let headBone = null;
        let mixer = null;
        let scrollAnimation = null;
        const clock = new THREE.Clock();
        
        // Mouse tracking variables
        let mouse = new THREE.Vector2();
        
        // Mascot positions for each section
        const mascotPositions = [
            { x: 0, y: 0.35, z: -2 },    // Section 0: Top right
            { x: 3, y: 0, z: -2 },   // Section 1: Top left  
            { x: 2, y: -1, z: -2 },   // Section 2: Bottom right
            { x: -2, y: -1, z: -2 }   // Section 3: Bottom left
        ];
        let currentMascotSection = 0;

        // Load the animated mascot
        const loader = new THREE.GLTFLoader();
        loader.load('./assets/nati.glb', (gltf) => {
            mascot = gltf.scene;
            
            // Scale and position the mascot (start at top-right)
            mascot.scale.set(1.5, 1.5, 1.5);
            mascot.position.set(mascotPositions[0].x, mascotPositions[0].y, mascotPositions[0].z);
            mascot.rotation.y = Math.PI * 1.45; // Rotate to face the camera
            
            // Add the mascot to the scene
            scene.add(mascot);
            
            // Set up animation mixer for scroll animation
            if (gltf.animations && gltf.animations.length > 0) {
                mixer = new THREE.AnimationMixer(mascot);
                
                // Find NlaTrack.001 animation
                const scrollAnimClip = gltf.animations.find(clip => clip.name === 'NlaTrack.003');
                if (scrollAnimClip) {
                    scrollAnimation = mixer.clipAction(scrollAnimClip);
                    scrollAnimation.setLoop(THREE.LoopOnce);
                    scrollAnimation.clampWhenFinished = true;
                    console.log('Found scroll animation: NlaTrack.003');
                } else {
                    console.log('NlaTrack.003 not found, available animations:', gltf.animations.map(a => a.name));
                }
            }
            
            // Find the head bone for targeted movement
            mascot.traverse((child) => {
                if (child.isBone || child.isMesh) {
                    console.log('Found bone/mesh:', child.name, child.type);
                    // Look for head-related names (common naming patterns)
                    if (child.name && (
                        child.name.toLowerCase().includes('head') ||
                        child.name.toLowerCase().includes('skull') ||
                        child.name.toLowerCase().includes('cranium') ||
                        child.name.includes('Head') ||
                        child.name.includes('head')
                    )) {
                        headBone = child;
                        console.log('Found head bone:', child.name);
                    }
                }
            });
            
            // If no head bone found by name, try to find it by hierarchy (usually near top)
            if (!headBone && mascot.children.length > 0) {
                // Look for skeleton first
                mascot.traverse((child) => {
                    if (child.isSkinnedMesh && child.skeleton) {
                        const bones = child.skeleton.bones;
                        console.log('Available bones:', bones.map(b => b.name));
                        // Try to find head bone by common names or position in hierarchy
                        headBone = bones.find(bone => 
                            bone.name.toLowerCase().includes('head') ||
                            bone.name.toLowerCase().includes('skull') ||
                            bone.name.includes('Head')
                        ) || bones[bones.length - 1]; // fallback to last bone (often head)
                        if (headBone) {
                            console.log('Found head bone in skeleton:', headBone.name);
                        }
                    }
                });
            }
        }, undefined, (error) => {
            console.error('Error loading mascot:', error);
        });

        // Mouse tracking for head rotation only
        function onMouseMove(event) {
            // Update mouse position
            mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
            mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;
            
            // Rotate only the head to face mouse position
            if (headBone) {
                // Calculate angle to face mouse (more subtle movement for head)
                const targetRotationY = mouse.x * 1; // Left/right head turn
                const targetRotationX = mouse.y * 1; // Up/down head tilt (inverted)
                
                // Smooth rotation towards mouse
                headBone.rotation.y += (targetRotationY - headBone.rotation.y) * 1;
                headBone.rotation.x += (targetRotationX - headBone.rotation.x) * 1;
            }
        }

        // Function to move mascot to specific section position
        function moveMascotToSection(sectionIndex) {
            if (!mascot || sectionIndex < 0 || sectionIndex >= mascotPositions.length) return;
            
            currentMascotSection = sectionIndex;
            const targetPos = mascotPositions[sectionIndex];
            
            // Trigger scroll animation immediately when scroll starts
            if (scrollAnimation) {
                scrollAnimation.reset().play();
            }
            
            // Smoothly move to new position with timing that matches CSS transition (0.8s)
            const startTime = performance.now();
            const startPos = { 
                x: mascot.position.x, 
                y: mascot.position.y, 
                z: mascot.position.z 
            };
            const duration = 800; // Match CSS transition duration (0.8s)
            
            const moveAnimation = (currentTime) => {
                const elapsed = currentTime - startTime;
                const progress = Math.min(elapsed / duration, 1);
                
                // Use cubic-bezier easing to match CSS: cubic-bezier(0.68, -0.55, 0.27, 1.55)
                const easeProgress = cubicBezier(progress, 0.68, -0.55, 0.27, 1.55);
                
                mascot.position.x = startPos.x + (targetPos.x - startPos.x) * easeProgress;
                mascot.position.y = startPos.y + (targetPos.y - startPos.y) * easeProgress;
                mascot.position.z = startPos.z + (targetPos.z - startPos.z) * easeProgress;
                
                if (progress < 1) {
                    requestAnimationFrame(moveAnimation);
                }
            };
            
            requestAnimationFrame(moveAnimation);
        }
        
        // Cubic bezier easing function to match CSS transition
        function cubicBezier(t, p1x, p1y, p2x, p2y) {
            // Simplified cubic bezier approximation for animation timing
            return t * t * (3 - 2 * t); // Fallback to smoothstep if complex bezier is not needed
        }

        function animate() {
            requestAnimationFrame(animate);
            
            // Update animation mixer for scroll animations
            if (mixer) {
                const delta = clock.getDelta();
                mixer.update(delta);
            }
            
            renderer.render(scene, camera);
        }
        animate();

        // --- Scroll and Navigation Logic ---
        const sectionsContainer = document.getElementById('sections-container');
        const sections = document.querySelectorAll('.section');
        const navDotsContainer = document.getElementById('nav-dots');
        let currentIndex = 0;
        let isWheeling = false;
        const totalSections = sections.length;

        // Create navigation dots
        for (let i = 0; i < totalSections; i++) {
            const dot = document.createElement('button');
            dot.setAttribute('aria-label', `Go to section ${i + 1}`);
            dot.addEventListener('click', () => goToSection(i));
            navDotsContainer.appendChild(dot);
        }
        const navDots = navDotsContainer.querySelectorAll('button');

        function updateNavDots() {
            navDots.forEach((dot, i) => {
                if (i === currentIndex) {
                    dot.classList.add('bg-white');
                } else {
                    dot.classList.remove('bg-white');
                }
            });
        }

        function goToSection(index) {
            if (index < 0 || index >= totalSections) return;
            currentIndex = index;
            sectionsContainer.style.transform = `translateY(-${currentIndex * 100}vh)`;
            updateNavDots();
            
            // Move mascot to corresponding position
            moveMascotToSection(index % mascotPositions.length);
        }

        // Handle wheel event for "jump" scroll
        window.addEventListener('wheel', event => {
            event.preventDefault();
            if (isWheeling) return;

            // Require more scroll momentum to trigger section jump
            if (Math.abs(event.deltaY) > 50) {
                isWheeling = true;
                const direction = event.deltaY > 0 ? 1 : -1;
                goToSection(currentIndex + direction);

                setTimeout(() => { isWheeling = false; }, 1500); // Longer debounce for less sensitivity
            }
        }, { passive: false });

        // Touch support for mobile devices
        let touchStartY = 0;
        let touchEndY = 0;
        let isTouching = false;

        window.addEventListener('touchstart', e => {
            touchStartY = e.changedTouches[0].screenY;
            isTouching = false;
        });

        window.addEventListener('touchend', e => {
            if (isTouching) return;
            
            touchEndY = e.changedTouches[0].screenY;
            const touchDiff = touchStartY - touchEndY;
            
            // Require minimum swipe distance
            if (Math.abs(touchDiff) > 50) {
                isTouching = true;
                const direction = touchDiff > 0 ? 1 : -1;
                goToSection(currentIndex + direction);
                
                setTimeout(() => { isTouching = false; }, 1000);
            }
        });

        // Keyboard navigation support
        window.addEventListener('keydown', e => {
            if (e.key === 'ArrowDown' || e.key === 'PageDown') {
                e.preventDefault();
                goToSection(currentIndex + 1);
            } else if (e.key === 'ArrowUp' || e.key === 'PageUp') {
                e.preventDefault();
                goToSection(currentIndex - 1);
            } else if (e.key === 'Home') {
                e.preventDefault();
                goToSection(0);
            } else if (e.key === 'End') {
                e.preventDefault();
                goToSection(totalSections - 1);
            }
        });
        
        // Handle window resize with mobile optimization
        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
            goToSection(currentIndex); // Recalculate position on resize
        });

        // Mobile-specific optimizations
        const isMobile = window.innerWidth <= 768;
        if (isMobile) {
            // Reduce Three.js rendering quality on mobile for better performance
            renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
        }

        // Add mouse event listener
        window.addEventListener('mousemove', onMouseMove);
        
        // Initial setup
        updateNavDots();
    </script>
</body>
</html>
